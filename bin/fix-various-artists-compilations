#!/usr/bin/env python

"""
  Remove explicit 'Various' albumartist tags & instead mark as a compilation.
"""

import mutagen

from trax.schema import Track, session

if __name__ == '__main__':

  for track in Track.query.filter(Track.albumartist.in_([u'Various', u'Various Artists'])):

    tags = mutagen.File(track.filename)

    del tags["albumartist"]
    tags["compilation"] = [u'1']
    tags.save()

    track.compilation = True
    track.albumartist = None

    print "Fixing up %s" % track.filename

  session.commit()
